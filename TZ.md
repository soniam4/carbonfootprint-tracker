# Техническое задание на проект: CarbonFootprint Tracker

## 1. Цель проекта
Разработка веб-сервиса для учета и анализа углеродного следа от повседневной деятельности пользователей. Сервис помогает осознать экологическое воздействие своих привычек, проводит детальные расчеты выбросов CO₂-эквивалента, визуализирует данные и предоставляет персонализированные рекомендации по снижению углеродного следа.

## 2. Роли пользователей
- **Гость**: Может использовать калькулятор углеродного следа для разовых расчетов, просматривать общую статистику.
- **Авторизованный пользователь**: Ведение личного дневника активности, просмотр детальной статистики и динамики изменений, получение персонализированных рекомендаций.
- **Администратор**: Управление справочными данными (коэффициентами выбросов, категориями), модерация рекомендаций, доступ к общей статистике.

## 3. Модели данных
### Модель 1: ActivityCategory (Категория активности)
- `name` (CharField) - название категории
- `description` (TextField) - описание категории  
- `icon` (CharField) - иконка для отображения
- `emission_factor_source` (CharField) - источник данных

### Модель 2: UserActivity (Активность пользователя)
- `user` (ForeignKey to User) - пользователь
- `category` (ForeignKey to ActivityCategory) - категория
- `activity_type` (CharField) - тип активности
- `quantity` (FloatField) - количество
- `unit` (CharField) - единица измерения
- `date` (DateField) - дата активности
- `calculated_co2` (FloatField) - рассчитанный CO₂
- `notes` (TextField) - дополнительные заметки

### Модель 3: EmissionFactor (Коэффициент выбросов)
- `activity_type` (CharField) - тип активности
- `category` (ForeignKey to ActivityCategory) - категория
- `co2_per_unit` (FloatField) - кг CO₂ на единицу
- `unit` (CharField) - единица измерения
- `region` (CharField) - регион применения
- `source` (CharField) - источник данных

### Модель 4: Recommendation (Рекомендации) 
- `title` (CharField) - заголовок рекомендации
- `description` (TextField) - подробное описание
- `category` (CharField) - категория (transport/food/energy/shopping/general)
- `co2_saving` (FloatField) - экономия CO₂ (кг/месяц)
- `difficulty` (CharField) - сложность внедрения (high/medium/low)
- `icon` (CharField) - иконка для отображения
- `is_active` (BooleanField) - активно ли рекомендация

## 4. Ключевой функционал
* **Расчет углеродного следа**: Пользователь вводит данные о активности через форму, система рассчитывает выбросы CO₂
* **Визуализация статистики**: Построение интерактивных графиков (Plotly) распределения выбросов по категориям
* **Персонализированные рекомендации**: Генерация советов по снижению углеродного следа на основе анализа активности
* **Сравнительная аналитика**: Сравнение своих показателей со средними значениями по региону
* **Административная панель**: Полный CRUD для всех моделей с русскоязычным интерфейсом
* **Главная страница с навигацией**: Современный адаптивный дизайн с Bootstrap 5

## 5. Внешние интеграции / Аналитика
- **Аналитика**: Использование библиотек Pandas для агрегации данных и статистических расчетов, Plotly для создания интерактивных графиков визуализации
- **Интеграции**: (опционально) API погоды OpenWeatherMap для корректировки расчетов отопления/охлаждения

## 6. Технический стек 
### Бэкенд:
- Python 3.12
- Django 4.2
- SQLite (разработка) / PostgreSQL (продакшн)

### Фронтенд:
- HTML5, CSS3, JavaScript
- Bootstrap 5 (адаптивный дизайн)
- Bootstrap Icons
- Chart.js / Plotly для графиков

### Дополнительные библиотеки:
- Pandas (для анализа данных)
- Plotly (для интерактивных графиков)

## 7. Структура проекта 
carbonfootprint-tracker/
├── carbon_app/ # Основное приложение
│ ├── migrations/ # Миграции БД
│ ├── templates/carbon_app/ # HTML шаблоны
│ │ ├── home.html # Главная страница
│ │ ├── calculator.html # Калькулятор
│ │ ├── dashboard.html # Статистика
│ │ └── ... # Другие шаблоны
│ ├── init.py
│ ├── admin.py # Настройки админки
│ ├── apps.py
│ ├── forms.py # Формы Django
│ ├── models.py # Модели данных
│ ├── urls.py # Маршруты приложения
│ └── views.py # Логика представлений
├── carbonfootprint/ # Конфигурация проекта
│ ├── init.py
│ ├── settings.py # Настройки проекта
│ ├── urls.py # Основные маршруты
│ └── wsgi.py
├── static/ # Статические файлы
├── media/ # Загружаемые файлы
├── requirements.txt # Зависимости Python
├── manage.py # Управление проектом
└── README.md # Документация

## 8. Этапы разработки
### Этап 1: Базовый функционал (ВЫПОЛНЕНО)
- [x] Настройка Django проекта и приложения
- [x] Создание моделей данных
- [x] Настройка административной панели
- [x] Базовая аутентификация пользователей
- [x] Главная страница с навигацией

### Этап 2: Основной функционал (В РАБОТЕ)
- [ ] Формы для добавления активностей
- [ ] Автоматический расчет CO₂
- [ ] Система рекомендаций
- [ ] Базовая аналитика и графики

### Этап 3: Дополнительный функционал (ПЛАНИРУЕТСЯ)
- [ ] Расширенная аналитика с Plotly
- [ ] REST API
- [ ] Система целей и достижений
- [ ] Социальные функции

## 9. Требования к интерфейсу 
- Адаптивный дизайн (мобильные устройства, планшеты, десктоп)
- Русскоязычный интерфейс
- Интуитивная навигация
- Визуальная привлекательность (зеленая цветовая схема)
- Быстрая загрузка страниц

## 10. Безопасность 
- Хэширование паролей
- CSRF защита
- SQL-инъекции предотвращены через ORM Django
- Валидация входных данных
- Разделение прав доступа по ролям

## 11. Развертывание
### Локальная разработка:
- Python 3.12, виртуальное окружение
- SQLite для базы данных
- Django development server

### Продакшен:
- PostgreSQL база данных
- Gunicorn/uWSGI + Nginx
- Хостинг: PythonAnywhere / Heroku / VPS

## 6. Изменения в ходе реализации
*Здесь будут отмечаться изменения по сравнению с изначальным планом*

### Изменения от 04.01.2026:
1. Добавлена модель Recommendation для системы рекомендаций
2. Расширена структура проекта дополнительными шаблонами
3. Добавлена поддержка Bootstrap 5 для современного дизайна
4. Внедрена система иконок Bootstrap Icons
5. Настроен русскоязычный интерфейс админ-панели