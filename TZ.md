# Техническое задание на проект: CarbonFootprint Tracker

## 1. Цель проекта
Разработка веб-сервиса для учета и анализа углеродного следа от повседневной деятельности пользователей. Сервис помогает осознать экологическое воздействие своих привычек, проводит детальные расчеты выбросов CO₂-эквивалента, визуализирует данные и предоставляет персонализированные рекомендации по снижению углеродного следа.

## 2. Целевая аудитория и роли пользователей
### Целевая аудитория:
- Люди, интересующиеся экологией и устойчивым развитием
- Студенты и преподаватели экологических дисциплин
- Организации, внедряющие программы корпоративной социальной ответственности

### Роли пользователей:
- **Гость**: Может использовать калькулятор углеродного следа для разовых расчетов, просматривать общую статистику.
- **Авторизованный пользователь**: Ведение личного дневника активности, просмотр детальной статистики и динамики изменений, получение персонализированных рекомендаций.
- **Администратор**: Управление справочными данными (коэффициентами выбросов, категориями), модерация рекомендаций, доступ к общей статистике.

## 3. Схема данных (Сущности)
### Модель 1: ActivityCategory (Категория активности)
- `name` (CharField) - название категории
- `description` (TextField) - описание категории  
- `icon` (CharField) - иконка для отображения
- `emission_factor_source` (CharField) - источник данных
- `created_at` (DateTimeField) - дата создания
- `updated_at` (DateTimeField) - дата обновления

### Модель 2: UserActivity (Активность пользователя)
- `user` (ForeignKey to User) - пользователь
- `category` (ForeignKey to ActivityCategory) - категория
- `activity_type` (CharField) - тип активности
- `quantity` (FloatField) - количество
- `unit` (CharField) - единица измерения
- `date` (DateField) - дата активности
- `calculated_co2` (FloatField) - рассчитанный CO₂
- `notes` (TextField) - дополнительные заметки
- `location` (CharField, опционально) - место активности

### Модель 3: EmissionFactor (Коэффициент выбросов)
- `activity_type` (CharField) - тип активности
- `category` (ForeignKey to ActivityCategory) - категория
- `co2_per_unit` (FloatField) - кг CO₂ на единицу
- `unit` (CharField) - единица измерения
- `region` (CharField) - регион применения
- `source` (CharField) - источник данных
- `last_updated` (DateField) - дата последнего обновления

### Дополнительная модель 4: Recommendation (Рекомендация)
- `title` (CharField) - заголовок рекомендации
- `description` (TextField) - подробное описание
- `category` (CharField) - категория рекомендации (транспорт/питание/энергия/общее)
- `co2_saving` (FloatField) - экономия CO₂ (кг/месяц)
- `difficulty` (CharField) - сложность внедрения
- `icon` (CharField) - иконка для отображения
- `is_active` (BooleanField) - активно ли рекомендация

## 4. Основные сценарии пользователя (User Stories)
1. **Расчет углеродного следа**: Пользователь заходит на сайт, вводит данные о своей активности через форму (например, 50 км на автомобиле), система автоматически рассчитывает выбросы CO₂ на основе коэффициентов и выводит результат с пояснениями.

2. **Визуализация статистики**: Авторизованный пользователь открывает личный кабинет, где видит интерактивные графики (Plotly), показывающие распределение выбросов по категориям за выбранный период времени (неделя/месяц/год).

3. **Получение рекомендаций**: Система анализирует активность пользователя и генерирует персонализированные рекомендации по снижению углеродного следа (например: "Замените 2 поездки на авто общественным транспортом для экономии 20 кг CO₂ в месяц").

4. **Сравнительная аналитика**: Пользователь сравнивает свои показатели со средними значениями по региону, видит свой рейтинг экологичности и получает советы по улучшению показателей.

5. **Управление данными**: Администратор добавляет новые коэффициенты выбросов через админ-панель, обновляет справочники категорий и модерирует систему рекомендаций.

## 5. Ключевой функционал
* **Расчет углеродного следа**: Пользователь вводит данные о активности через форму, система рассчитывает выбросы CO₂
* **Визуализация статистики**: Построение интерактивных графиков (Plotly) распределения выбросов по категориям
* **Персонализированные рекомендации**: Генерация советов по снижению углеродного следа на основе анализа активности
* **Сравнительная аналитика**: Сравнение своих показателей со средними значениями по региону
* **Административное управление**: Полный CRUD для всех моделей через Django Admin с русскоязычным интерфейсом

## 6. Технический стек и интеграции
### Технический стек:
- **Backend**: Python 3.12, Django 4.2
- **База данных**: SQLite (разработка), PostgreSQL (продакшн)
- **Фронтенд**: HTML5, CSS3, JavaScript, Bootstrap 5
- **Развертывание**: PythonAnywhere 

### Внешние интеграции / Аналитика:
- **Аналитика**: Использование библиотек Pandas для агрегации данных и статистических расчетов, Plotly для создания интерактивных графиков визуализации
- **Интеграции**: (опционально) API погоды OpenWeatherMap для корректировки расчетов отопления/охлаждения

## 7. Изменения в ходе реализации
*Здесь будут отмечаться изменения по сравнению с изначальным планом*

### Изменения от 04.01.2026:
1. Добавлена дополнительная модель `Recommendation` для системы персональных рекомендаций
2. Расширен функционал административной панели для управления коэффициентами выбросов
3. Внедрена система автоматического расчета CO₂ при сохранении активности пользователя
4. Добавлена поддержка русскоязычного интерфейса во всех компонентах системы
